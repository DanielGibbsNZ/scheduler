{"version":3,"sources":["../../src/state/root.ts","../../src/scheduling/rule_based/rules.ts","../../src/scheduling/common.ts","../../node_modules/@angular/core/esm5 lazy","../../src lazy","../../src/state/people.ts","../../src/pages/tabs/tabs.ts","../../src/pages/about/about.ts","../../src/pages/home/home.ts","../../src/state/scheduling-types.ts","../../src/pages/people/people.ts","../../src/scheduling/by_exclusion/scheduler.ts","../../src/app/main.ts","../../src/app/app.module.ts","../../src/app/app.component.ts","../../src/state/roles.ts","../../src/state/UIState.ts","../../src/providers/store/test.store.ts","../../src/scheduling/rule_based/scheduler.ts","../../src/components/components.module.ts","../../src/components/schedule-viewer/schedule-viewer.ts","../../src/components/person-editor/person-editor.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["import {PeopleStore} from \"./people\";\nimport {RolesStore} from \"./roles\";\nimport {UIStore} from \"./UIState\";\nimport {Injectable} from \"@angular/core\";\nimport {TestStoreConstruction} from \"../providers/store/test.store\";\nimport {autorunAsync, IReactionDisposer} from \"mobx\";\nimport {ScheduleInput} from \"../scheduling/common\";\nimport {ScheduleWithRules} from \"../scheduling/rule_based/scheduler\";\n\n@Injectable()\nclass RootStore {\n    people_store: PeopleStore;\n    roles_store: RolesStore;\n    ui_store: UIStore;\n\n    private schedule: ScheduleWithRules;\n    private regenerator: IReactionDisposer;\n\n    constructor() {\n        this.people_store = new PeopleStore();\n        this.roles_store = new RolesStore();\n        this.ui_store = new UIStore();\n\n        TestStoreConstruction.SetupStore(this);\n\n        this.regenerator = autorunAsync(() => {\n            console.log(\"Generate schedule...\");\n            this.generate_schedule();\n\n            // this.schedule.dates.forEach(sc => {\n            //     console.log(\"\" + sc);\n            // });\n        });\n    }\n\n    generate_schedule(): ScheduleWithRules {\n        // for testing, create some fake\n        let params = new ScheduleInput(this.people_store, this.roles_store);\n        params.start_date = new Date(2018, 0, 7);\n        params.end_date = new Date(2018, 4, 1);\n\n        if (!this.schedule) {\n            this.schedule = new ScheduleWithRules(params);\n        }\n        this.schedule.create_schedule();\n        return this.schedule;\n    }\n}\n\nexport {RootStore}\n\n\n// WEBPACK FOOTER //\n// ./src/state/root.ts","import {Person} from \"../../state/people\";\nimport includes from 'lodash/includes';\nimport {Role} from \"../../state/roles\";\nimport sum from 'lodash/sum';\nimport sumBy from 'lodash/sumBy';\nimport sortBy from 'lodash/sortBy';\nimport {isUndefined} from \"ionic-angular/util/util\";\n\nlet priority_comparator = (r1: Rule, r2: Rule) => {\n    return r1.priority < r2.priority ? -1 : r1.priority > r2.priority ? 1 : 0;\n};\n\nclass RuleState {\n    date: Date;\n    person: Person;\n\n    valueOf() {\n        return JSON.stringify(this);\n    }\n}\n\nclass Rule {\n    priority: number;\n\n    constructor(priority: number = 0) {\n        this.priority = priority;\n    }\n\n    execute(state: RuleState): Iterator<any> {\n        return {\n            next: () => {\n                return {done: true, value: null}\n            }\n        }\n    }\n\n\n}\n\nclass Rules {\n    protected rules: Array<Rule>;\n    protected current_iterator: Iterator<Person>;\n    protected iterators_to_iterate: Array<Iterator<Person>>;\n\n    constructor() {\n        this.rules = [];\n    }\n\n    get length(): number {\n        return this.rules.length;\n    }\n\n    addRules(rules: Array<Rule>) {\n        for (let rule of rules) {\n            this.addRule(rule);\n        }\n    }\n\n    addRule(rule: Rule) {\n        if (!includes(this.rules, rule)) {\n            this.rules.push(rule);\n        }\n    }\n\n    execute(state: RuleState): Iterator<any> {\n        this.current_iterator = null;\n        this.iterators_to_iterate = [];\n        for (let rule of this.rules.sort(priority_comparator)) {\n            let iterator = rule.execute(state);\n            this.iterators_to_iterate.push(iterator);\n        }\n\n        this.current_iterator = this.iterators_to_iterate.pop();\n        return {\n            next: () => {\n                if (this.iterators_to_iterate == null || isUndefined(this.iterators_to_iterate)) {\n                    return {\n                        done: true, value: null\n                    }\n                }\n\n                // get the next value and maybe choose the next iterator\n                let next_value = this.current_iterator.next();\n                // console.log(\"Next value is: \" + next_value.value);\n                while (next_value.done) {\n                    this.current_iterator = this.iterators_to_iterate.pop();\n                    if (this.current_iterator == null) {\n                        return {\n                            done: true, value: null\n                        }\n                    }\n                    next_value = this.current_iterator.next();\n                }\n                return next_value;\n            }\n        }\n    }\n\n    use_this_role(role: Role) {\n        this.use_this(role);\n    }\n\n    use_this_person(person: Person) {\n        this.use_this(person);\n    }\n\n    private use_this(thing: Object) {\n        this.rules.forEach((r) => {\n            if (r instanceof RoleRule && thing instanceof Role) {\n                r.use_this_role(thing)\n            }\n            if (r instanceof PickRule && thing instanceof Person) {\n                r.use_this_person(thing)\n            }\n        });\n    }\n}\n\nclass RoleRule extends Rule {\n    execute(state: RuleState): Iterator<Role> {\n        throw new Error(\"Need implementation\")\n    }\n\n    use_this_role(r: Role) {\n    }\n}\n\nclass Score {\n    weighting: number; // 0..1\n    usage_count: number; // number of times this element has been used\n\n    constructor(weighting, score = 0) {\n        this.weighting = weighting;\n        this.usage_count = 0;\n    }\n\n    valueOf() {\n        return \"Weighting: \" + this.weighting + \", usage: \" + this.usage_count;\n    }\n}\n\nclass FixedRoleOnDate extends RoleRule {\n    date: Date;\n    role: Role;\n    private haveReturnedValue: boolean;\n\n    constructor(date: Date, r: Role, priority = 0) {\n        super(priority);\n        this.date = date;\n        this.role = r;\n        this.haveReturnedValue = false;\n    }\n\n    execute(state: RuleState): Iterator<Role> {\n        return {\n            next: () => {\n                // console.log(\"Execute for date: \" + this.date + \". Run yet: \" + this.haveReturnedValue);\n                if (this.date == state.date && !this.haveReturnedValue) {\n                    this.haveReturnedValue = true;\n                    return {\n                        done: false,\n                        value: this.role\n                    }\n                }\n\n                return {\n                    done: true, value: null\n                }\n            }\n        };\n    }\n}\n\nclass WeightedRoles extends RoleRule {\n    weightedRoles: Map<Role, number>;\n    scoring: Map<Role, Score>;\n\n    constructor(weightedRules: Map<Role, number>) {\n        super();\n        this.weightedRoles = weightedRules;\n        this.clearScores();\n        this.normalizeWeights();\n    }\n\n    private clearScores() {\n        this.scoring = new Map<Role, Score>();\n    }\n\n    get roles_sorted_by_score(): Array<Role> {\n        return sortBy(Array.from(this.weightedRoles.keys()), (o) => {\n            return this.score_for_role(o).usage_count;\n        });\n    }\n\n    get roles_sorted_by_weight(): Array<Role> {\n        return sortBy(Array.from(this.weightedRoles.keys()), (o) => {\n            return this.weightedRoles.get(o);\n        });\n    }\n\n    execute(state: RuleState): Iterator<Role> {\n        return {\n            next: () => {\n                // sort by current score, highest first.\n                let roles_in_weight_order = this.roles_sorted_by_weight;\n                let total_usages = this.total_uses;\n\n                // console.log(\"Total usages: \" + total_usages);\n\n                if (total_usages == 0) {\n                    return {\n                        done: false,\n                        value: roles_in_weight_order[0]\n                    }\n                }\n\n                // Choose the next role\n                for (let role of roles_in_weight_order) {\n                    let role_weighting = this.weightedRoles.get(role);\n\n                    let current_score = this.score_for_role(role);\n                    let runtime_weighting = current_score.usage_count / total_usages;\n                    // console.log(role.name + \", weight: \" + role_weighting + \". Has score: \" + current_score + \". Runtime weight: \" + runtime_weighting);\n                    if (runtime_weighting <= role_weighting) {\n                        return {\n                            done: false,\n                            value: role\n                        }\n                    }\n                }\n\n                return {done: true, value: null}\n            }\n        }\n    }\n\n    get total_uses(): number {\n        return sumBy(Array.from(this.scoring.values(), (o) => o.usage_count))\n    }\n\n    score_for_role(r: Role): Score {\n        let weighting = this.weightedRoles.get(r);\n        if (isUndefined(weighting)) {\n            throw Error(\"No weighting for this role, \" + r.name);\n        }\n        if (this.scoring.has(r)) {\n            return this.scoring.get(r);\n        }\n        return new Score(weighting);\n    }\n\n    use_this_role(r: Role) {\n        let score = this.score_for_role(r);\n        console.log(\"Increment score for '\" + r.name + \"' from \" + score.usage_count + \" to \" + (score.usage_count + 1));\n        score.usage_count++;\n        this.scoring.set(r, score);\n    }\n\n    private normalizeWeights() {\n        let total_weight: number = sum(Array.from(this.weightedRoles.values()));\n        // console.log(\"Total weights: \" + total_weight);\n        this.weightedRoles.forEach((num, key) => {\n            this.weightedRoles.set(key, num / total_weight);\n        });\n    }\n}\n\nclass PickRule extends Rule {\n    execute(state: RuleState): Iterator<Person> {\n        throw new Error(\"Need implementation\")\n    }\n\n    use_this_person(p: Person) {\n    }\n}\n\nclass OnThisDate extends PickRule {\n    role: Role;\n    date: Date;\n    person: Person;\n\n    private haveReturnedValue: boolean;\n\n    constructor(date: Date, person: Person, role: Role, priority: number = 0) {\n        super(priority);\n        this.date = date;\n        this.role = role;\n        this.person = person;\n        this.haveReturnedValue = false;\n    }\n\n    execute(state: RuleState): Iterator<Person> {\n        return {\n            next: () => {\n                let hasPrimaryRole = this.person.has_primary_role(this.role);\n                if (state.date == this.date && hasPrimaryRole && !this.haveReturnedValue) {\n                    this.haveReturnedValue = true;\n                    return {\n                        done: false,\n                        value: this.person\n                    }\n                }\n                return {\n                    done: true,\n                    value: null\n                }\n            }\n        }\n    }\n}\n\nclass UsageWeightedSequential extends PickRule {\n    private usages: Map<Person, number>;\n    private original_index: Map<Person, number>;\n\n    constructor(people: Array<Person>, priority: number = 0) {\n        super(priority);\n        this.usages = new Map<Person, number>();\n        this.original_index = new Map<Person, number>();\n\n        people.forEach((p, index) => {\n            this.usages.set(p, 0);\n            this.original_index.set(p, index);\n        });\n    }\n\n    execute(state: RuleState): Iterator<Person> {\n        // Sort by number\n        let peopleInUsageOrder = Array.from(this.usages.keys()).sort((p1: Person, p2: Person) => {\n            let usageForP1 = this.usages.get(p1);\n            let usageForP2 = this.usages.get(p2);\n            if (usageForP1 < usageForP2) {\n                return -1;\n            } else if (usageForP1 > usageForP2) {\n                return 1;\n            }\n\n            // Compare by index\n            let p1Index = this.original_index.get(p1);\n            let p2Index = this.original_index.get(p2);\n            if (p1Index < p2Index) {\n                return -1;\n            } else if (p1Index > p2Index) {\n                return 1;\n            }\n            return 0;\n        });\n        if (peopleInUsageOrder.length > 0) {\n            return peopleInUsageOrder.values();\n        }\n        return null;\n    }\n\n    use_this_person(p: Person) {\n        let existing = this.usages.get(p);\n        console.log(\"Increment usage for \" + p.name + \" from \" + existing + \" to \" + (existing + 1));\n        this.usages.set(p, existing + 1);\n    }\n}\n\nexport {\n    UsageWeightedSequential,\n    WeightedRoles,\n    FixedRoleOnDate,\n    RuleState,\n    OnThisDate,\n    PickRule,\n    Rules,\n    Rule\n}\n\n\n// WEBPACK FOOTER //\n// ./src/scheduling/rule_based/rules.ts","import {Role, RolesStore} from \"../state/roles\";\nimport {PeopleStore, Person} from \"../state/people\";\nimport * as _ from 'lodash';\n\nclass ScheduleScore {\n    roles: Array<Role>;\n    layout_weight: number;\n    roster_weight: number;\n    score: number;\n\n    constructor(roles: Array<Role>) {\n        this.roles = roles;\n        this.score = 0;\n    }\n\n    has_role(role: Role) {\n        return _.includes(this.roles, role);\n    }\n\n    valueOf() {\n        let role_names = _.join(this.roles.map(r => r.name), ', ');\n        return \"Score: \" + this.score + \" for roles: \" + role_names;\n    }\n}\n\nclass ScheduleInput {\n    start_date: Date;\n    end_date: Date;\n    days_per_period: number;\n\n    roles: RolesStore;\n    people: PeopleStore;\n\n    constructor(people: PeopleStore = new PeopleStore(), roles: RolesStore = new RolesStore()) {\n        this.days_per_period = 7;\n        this.people = people;\n        this.roles = roles;\n    }\n\n    validate() {\n        if (this.roles.roles_in_layout_order.length == 0) {\n            throw Error(\"The dates parameters don't define any roles.\");\n        }\n\n        if (this.days_per_period < 1) {\n            throw new Error(\"Period must be > 1\");\n        }\n\n        if (!this.start_date || isNaN(this.start_date.valueOf())) {\n            throw new Error(\"No start date, or start date is invalid\");\n        }\n        if (!this.end_date || isNaN(this.end_date.valueOf())) {\n            throw new Error(\"No end date, or end date is invalid\");\n        }\n\n        if (this.schedule_duration_in_days <= 0) {\n            throw new Error(\"The dates has no sensible length (0 or -ve)\");\n        }\n    }\n\n    get schedule_duration_in_days(): number {\n        return daysBetween(this.start_date, this.end_date);\n    }\n\n}\n\nfunction daysBetween(startDate: Date, endDate: Date): number {\n    let msPerDay = 1000 * 60 * 60 * 24;\n    return (endDate.valueOf() - startDate.valueOf()) / msPerDay;\n}\n\nclass Exclusion {\n    start_date: Date;\n    end_date: Date;\n    role: Role;\n\n    constructor(start: Date, end: Date, because: Role) {\n        this.start_date = start;\n        this.end_date = end;\n        this.role = because;\n        if (this.duration_in_days < 0) {\n            throw Error(\"Cannot have an exclusion zone with a -ve duration\");\n        }\n    }\n\n    overlap_with(other: Exclusion) {\n        return this.includes_date(other.start_date) ||\n            this.includes_date(other.end_date) ||\n            other.includes_date(this.start_date) ||\n            other.includes_date(this.end_date);\n    }\n\n    includes_date(date: Date) {\n        return this.start_date <= date && date < this.end_date;\n    }\n\n    get duration_in_days(): number {\n        return daysBetween(this.start_date, this.end_date);\n    }\n\n    valueOf() {\n        return JSON.stringify(this);\n    }\n}\n\n// Score for this person, for some date\nclass ScheduleAtDate {\n    date: Date;\n    people_score: Map<Person, ScheduleScore>;\n\n    constructor(date: Date) {\n        this.date = date;\n        this.people_score = new Map<Person, ScheduleScore>();\n    }\n\n    score_for(p: Person) {\n        return this.people_score.get(p);\n    }\n\n    get people(): Array<Person> {\n        return Array.from(this.people_score.keys());\n    }\n\n    get people_sorted_by_role_priority(): Array<Person> {\n        let people = this.people;\n        return people.sort((a: Person, b: Person) => {\n            if (a.highest_role_layout_priority > b.highest_role_layout_priority) {\n                return 1;\n            } else if (a.highest_role_layout_priority < b.highest_role_layout_priority) {\n                return -1;\n            }\n            return 0;\n        });\n    }\n\n    add_person(person: Person, role: Role) {\n        let roles = person.role_include_dependents_of(role);\n        console.log(\"Schedule \" + person.name + \" for \" + JSON.stringify(roles.map(r => r.name)) + \" on \" + this.date);\n        let score = new ScheduleScore(roles);\n        this.people_score.set(person, score);\n    }\n\n    people_in_role(role: Role): Array<Person> {\n        return this.people.filter(p => {\n            let score = this.people_score.get(p);\n            return score.has_role(role);\n        });\n    }\n\n    valueOf() {\n        let names_with_tasks = this.people_sorted_by_role_priority.map(p => {\n            return p.name + \"=\" + this.people_score.get(p);\n        });\n        return this.date.toDateString() + \" - \" + _.join(names_with_tasks, ',');\n    }\n}\n\n\nexport {\n    Exclusion,\n    ScheduleInput,\n    ScheduleScore,\n    ScheduleAtDate,\n    daysBetween\n}\n\n\n// WEBPACK FOOTER //\n// ./src/scheduling/common.ts","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 145;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@angular/core/esm5 lazy\n// module id = 145\n// module chunks = 0","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 186;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src lazy\n// module id = 186\n// module chunks = 0","import {action, computed, observable} from \"mobx-angular\";\nimport {Role} from \"./roles\";\nimport {AvailabilityUnit, SchedulePrefs} from \"./scheduling-types\";\nimport ShortUniqueId from 'short-unique-id';\nimport * as _ from \"lodash\";\nimport {isUndefined} from \"util\";\nimport {Rules, WeightedRoles} from \"../scheduling/rule_based/rules\";\n\nclass Unavailablity {\n    from_date: Date = null;\n    to_date: Date = null;\n\n    constructor(from: Date, to: Date = null) {\n        if (from == null) {\n            throw new Error(\"From date cannot be null\");\n        }\n        this.from_date = from;\n        this.to_date = to;\n    }\n\n    public static dayAndHourForDate(date: Date): string {\n        return date.getFullYear() + \"/\" + date.getMonth() + \"/\" + date.getDate() + \"@\" + date.getHours();\n    }\n\n    get is_date_range(): boolean {\n        return this.from_date != null && this.to_date != null;\n    }\n\n    matches_single_date(d: Date) {\n        if (this.to_date != null) {\n            return false;\n        }\n        let thisDate = Unavailablity.dayAndHourForDate(this.from_date);\n        let otherDate = Unavailablity.dayAndHourForDate(d);\n        return thisDate == otherDate;\n    }\n\n    contains_date(date: Date) {\n        let start = this.from_date;\n\n        // By default, be one day in length\n        let the_end_date = new Date(start);\n        the_end_date.setDate(start.getDate() + 1);\n\n        if (this.is_date_range) {\n            the_end_date = this.to_date;\n        }\n        return date >= start && date < the_end_date;\n    }\n}\n\nclass Person {\n    private _name: string;\n\n    @observable uuid: string;\n\n    @computed\n    get name(): string {\n        return this._name;\n    }\n\n    set name(value: string) {\n        this._name = value;\n        // console.log(\"Set name to \" + value);\n    }\n\n    primary_roles: Map<Role, number>;\n    @observable unavailable: Array<Unavailablity>;\n    @observable prefs: SchedulePrefs;\n\n    // Need to store a role, and also for this person, if they are in this role what\n    // other roles they can also fullfill. However; mobx doesn't like using objects as keys\n    // in maps, which is a pain.\n    secondary_roles: Map<string, Array<Role>>;\n\n    constructor(name: string, uuid: string = null) {\n        if (uuid == null) {\n            let uuid_gen = new ShortUniqueId();\n            uuid = uuid_gen.randomUUID(8);\n        }\n        this.uuid = uuid;\n        this.name = name;\n        this.primary_roles = new Map<Role, number>();\n        this.secondary_roles = new Map<string, Array<Role>>();\n        this.unavailable = [];\n        this.prefs = new SchedulePrefs();\n    }\n\n    role_rules(): Rules {\n        let rules = new Rules();\n\n        // TODO: Hmm. Could add unavailability dates as rules?\n        // Have a rule that returns NO roles if the person is unavailable.\n        // Could do that on the Pick as well. Here might be a little cleaner, model wise.\n\n        // Add in weighted role distribution\n        let weighting = new WeightedRoles(this.primary_roles);\n        rules.addRule(weighting);\n\n        return rules;\n    }\n\n    @computed\n    get roles(): Array<Role> {\n        return Array.from(this.primary_roles.keys());\n    }\n\n    @computed\n    get highest_role_layout_priority(): number {\n        return this.roles.reduce((previousMax, role) => {\n            return Math.max(previousMax, role.layout_priority);\n        }, 0);\n    }\n\n    avail_every(a_number: number, unit: AvailabilityUnit): Person {\n        this.prefs.availability.every(a_number, unit);\n        return this;\n    }\n\n    get max_role_layout_priority(): number {\n        return this.roles.reduce((prev, role) => {\n            return Math.max(prev, role.layout_priority);\n        }, 0);\n    }\n\n    @action\n    with_dep_role(role: Role, other_roles: Array<Role>): Person {\n        this.addRole(role);\n        if (other_roles.length > 0) {\n            this.secondary_roles.set(role.uuid, other_roles);\n        }\n        return this;\n    }\n\n    // @action\n    // with_roles(roles: Array<Role>): Person {\n    //     for (let role of roles) {\n    //         this.addRole(role);\n    //     }\n    //     return this;\n    // }\n\n    has_primary_role(role: Role) {\n        let matching_roles = this.roles.filter(r => {\n            return r.uuid == role.uuid;\n        });\n        return matching_roles.length > 0;\n    }\n\n    @action\n    addRole(r: Role, weighting = 1): Person {\n        if (r == null || isUndefined(r)) {\n            throw Error(\"Cannot add a nil or undefined role\");\n        }\n        this.primary_roles.set(r, weighting);\n        return this;\n    }\n\n    @action\n    removeRole(r: Role): Person {\n        this.primary_roles.delete(r);\n        this.secondary_roles.delete(r.uuid);\n        return this;\n    }\n\n    @action\n    addUnavailable(d: Date) {\n        this.unavailable.push(new Unavailablity(d));\n    }\n\n    addUnavailableRange(from: Date, to: Date) {\n        this.unavailable.push(new Unavailablity(from, to));\n    }\n\n    removeUnavailable(d: Date) {\n        this.unavailable = this.unavailable.filter(ud => {\n            return !ud.matches_single_date(d);\n        });\n    }\n\n    is_unavailable_on(date: Date) {\n        // See if this date is inside the unavailable date ranges\n        for (let unavail of this.unavailable) {\n            if (unavail.contains_date(date)) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    role_include_dependents_of(role: Role): Array<Role> {\n        let secondary = this.secondary_roles.get(role.uuid);\n        if (secondary) {\n            return [\n                role,\n                ...Array.from(this.secondary_roles.get(role.uuid))\n            ]\n        }\n        return [role];\n    }\n}\n\nclass PeopleStore {\n    @observable people: Array<Person>;\n\n    constructor() {\n        this.people = [];\n    }\n\n    @action\n    addPerson(p: Person): Person {\n        this.people.push(p);\n        return p;\n    }\n\n    @action\n    removePerson(p: Person) {\n        this.people = this.people.filter(per => {\n            return per.uuid != p.uuid\n        });\n    }\n\n    people_with_role(role: Role) {\n        return this.people.filter(person => {\n            for (let person_role of person.roles) {\n                if (role.uuid == person_role.uuid) {\n                    return true;\n                }\n            }\n            return false;\n        });\n    }\n\n    get roles_for_all_people(): Array<Role> {\n        let all_roles = _.flatMap(this.people, (p) => p.roles);\n        return _.uniqBy(all_roles, (r) => r.uuid);\n    }\n\n    order_people_by_role_layout_priority() {\n        return this.people.sort((p1: Person, p2: Person) => {\n            let maxlp1 = p1.max_role_layout_priority;\n            let maxlp2 = p2.max_role_layout_priority;\n            return maxlp1 < maxlp2 ? 1 : maxlp1 > maxlp2 ? -1 : 0;\n        });\n    }\n}\n\n\nexport {\n    Unavailablity,\n    PeopleStore,\n    Person\n}\n\n\n// WEBPACK FOOTER //\n// ./src/state/people.ts","import {Component} from '@angular/core';\n\nimport {AboutPage} from '../about/about';\nimport {HomePage} from '../home/home';\nimport {PeoplePage} from \"../people/people\";\n\n@Component({\n    templateUrl: 'tabs.html'\n})\nexport class TabsPage {\n\n    tab1Root = HomePage;\n    tab2Root = PeoplePage;\n    tab3Root = AboutPage;\n\n    constructor() {\n\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/tabs/tabs.ts","import { Component } from '@angular/core';\nimport { NavController } from 'ionic-angular';\n\n@Component({\n  selector: 'page-about',\n  templateUrl: 'about.html'\n})\nexport class AboutPage {\n\n  constructor(public navCtrl: NavController) {\n\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/about/about.ts","import {Component} from '@angular/core';\nimport {NavController} from 'ionic-angular';\nimport {RootStore} from \"../../state/root\";\n\n@Component({\n    selector: 'page-home',\n    templateUrl: 'home.html'\n})\nexport class HomePage {\n\n    constructor(public navCtrl: NavController, private store: RootStore) {\n    }\n\n    clear_selection() {\n        this.store.ui_store.selected_person = null;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.ts","import {observable} from \"mobx-angular\";\nimport {Person} from \"./people\";\n\nexport enum AvailabilityUnit {\n    AVAIL_ANYTIME,\n    EVERY_N_DAYS,\n    EVERY_N_WEEKS,\n}\n\nexport class Availability {\n    period: number;\n    unit: AvailabilityUnit;\n\n    constructor(period: number = 1, unit: AvailabilityUnit = AvailabilityUnit.AVAIL_ANYTIME) {\n        this.period = period;\n        this.unit = unit;\n    }\n\n    get_end_date_from(date: Date) {\n        let end_date = new Date(date);\n        switch(this.unit) {\n            case AvailabilityUnit.AVAIL_ANYTIME:\n                end_date.setDate(date.getDate() + 1);\n                break;\n\n            case AvailabilityUnit.EVERY_N_DAYS:\n                end_date.setDate(date.getDate() + this.period - 1);\n                break;\n\n            case AvailabilityUnit.EVERY_N_WEEKS:\n                end_date.setDate(date.getDate() + (7 * this.period) - 1);\n                break;\n        }\n        return end_date;\n    }\n\n    every(a_number: number, unit: AvailabilityUnit) {\n        this.period = a_number;\n        this.unit = unit;\n    }\n}\n\nexport class SchedulePrefs {\n    @observable slip_aggressiveness: number;\n    @observable fill_aggresiveness: number;\n    @observable preferred_leader: Person;\n    @observable availability: Availability;\n\n    constructor() {\n        this.slip_aggressiveness = 0;\n        this.fill_aggresiveness = 0;\n        this.availability = new Availability();\n    }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/state/scheduling-types.ts","import { Component } from '@angular/core';\nimport { NavController } from 'ionic-angular';\n\n@Component({\n  selector: 'page-people',\n  templateUrl: 'people.html'\n})\nexport class PeoplePage {\n\n  constructor(public navCtrl: NavController) {\n\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/people/people.ts","import {Person, Unavailablity} from \"../../state/people\";\nimport {Role} from \"../../state/roles\";\nimport includes from 'lodash/includes';\nimport {Exclusion, ScheduleAtDate, ScheduleInput} from \"../common\";\n\nexport class ScheduleByExclusion {\n    role_index: Map<Role, number>;\n    dates: Map<string, ScheduleAtDate>;\n    exclusion_zones: Map<Person, Array<Exclusion>>;\n\n    private params: ScheduleInput;\n\n    constructor(params: ScheduleInput) {\n        this.params = params;\n        this.params.validate();\n        this.clear_working_state();\n    }\n\n    private clear_working_state() {\n        this.role_index = new Map<Role, number>();\n        this.dates = new Map<string, ScheduleAtDate>();\n        this.exclusion_zones = new Map<Person, Array<Exclusion>>();\n    }\n\n    get start_date(): Date {\n        return this.params.start_date;\n    }\n\n    get end_date(): Date {\n        return this.params.end_date;\n    }\n\n    get days_per_period(): number {\n        return this.params.days_per_period;\n    }\n\n    get schedule_duration_in_days(): number {\n        return this.params.schedule_duration_in_days;\n    }\n\n    get_schedule_for_date(date: Date) {\n        let dateAtHour = Unavailablity.dayAndHourForDate(date);\n        let schedule = this.dates.get(dateAtHour);\n        if (schedule == null) {\n            console.log(\"Create new schedule for \" + dateAtHour);\n            schedule = new ScheduleAtDate(date);\n            this.dates.set(dateAtHour, schedule);\n            return schedule;\n        } else {\n            console.log(\"Reuse schedule for \" + dateAtHour + \" = \" + date);\n            return schedule;\n        }\n    }\n\n    public create_schedule() {\n        this.clear_working_state();\n        console.log(\"Working from \" + this.params.start_date + \" to: \" + this.params.end_date);\n        let schedule_duration = this.schedule_duration_in_days;\n        console.log(\"Schedule is \" + schedule_duration + \" days long\");\n\n        let iterations = 0;\n\n        // Work through all roles first, by date.\n        let roles_store = this.params.roles;\n        let people_store = this.params.people;\n        let roles_groups = roles_store.roles_in_layout_order_grouped;\n        let role_names = roles_groups.map(g => JSON.stringify(g.map(r => r.name)));\n        console.log(\"Roles (in order of importance): \" + JSON.stringify(role_names));\n\n        for (let role_group of roles_groups) {\n            let current_date = this.params.start_date;\n            console.log(\"\");\n            console.log(\"Next group: \" + JSON.stringify(role_group.map(r => r.name)));\n\n            // Iterate through all dates\n            while (current_date.valueOf() < this.params.end_date.valueOf()) {\n                console.log(\"Next date: \" + current_date);\n\n                // For this date, try to layout all people\n                for (let role of role_group) {\n                    let people_for_this_role = people_store.people_with_role(role);\n\n                    // Setup our available people (which at the beginning, is 'everyone')\n                    if (people_for_this_role.length == 0) {\n                        // console.log(\"Laying out role: \" + role.name + \" ... skipping (no one to do it)\");\n                        continue;\n                    }\n                    console.log(\"Considering: \" + JSON.stringify(people_for_this_role.map(p => {\n                        return p.name;\n                    })) + \" for role \" + role.name + \" on \" + current_date.toDateString());\n\n                    // Iterate all the people, but do so from the last used index.\n                    // This is so we give everyone who can do that role the chance.\n                    for (let person_index = 0; person_index < people_for_this_role.length; person_index++) {\n                        let last_role_index = this.role_index.get(role);\n                        if (last_role_index === undefined) {\n                            last_role_index = 0;\n                        }\n                        let actulal_index = person_index + last_role_index;\n                        actulal_index = actulal_index % people_for_this_role.length;\n\n                        let person = people_for_this_role[actulal_index];\n\n                        // If already in this role, skip\n                        let specific_day = this.get_schedule_for_date(current_date);\n                        if (!specific_day) {\n                            throw Error(\"What? Unable to get a schedule for \" + current_date);\n                        }\n\n                        if (includes(specific_day.people_in_role(role), person)) {\n                            console.log(\"Skipping \" + person.name + \", they are already on it\");\n                            continue;\n                        }\n\n                        let [has_exclusion, reason] = this.has_exclusion_for(current_date, person, role);\n                        if (has_exclusion) {\n                            console.log(person.name + \" cant do it, they have an exclusion: \" + reason);\n                            continue;\n                        }\n\n                        // ok. We can put someone in this slot then.\n                        specific_day.add_person(person, role);\n                        this.record_exclusions(current_date, person, role);\n\n                        // record that we used this index\n                        this.role_index.set(role, actulal_index + 1);\n\n                        // OK. Have we reached the max?\n                        let peopleInRole = specific_day.people_in_role(role);\n                        if (peopleInRole.length >= role.maximum_count) {\n                            // Done. We can move on.\n                            break;\n                        }\n                    }\n                }\n\n                // Move to the next date\n                current_date = this.choose_next_schedule_date(current_date);\n\n                // This is taking 10,000 reasons too far!\n                iterations++;\n                if (iterations > 10000) {\n                    console.error(\"Max iterations - bug!?\");\n                    break\n                }\n            }\n        }\n    }\n\n    private choose_next_schedule_date(date: Date): Date {\n        let next_date = new Date(date);\n        // console.log(\"Moving from date ... : \" + next_date);\n        next_date.setDate(date.getDate() + this.days_per_period);\n        // console.log(\".... to date ... : \" + next_date);\n        return next_date;\n    }\n\n    has_exclusion_for(date: Date, person: Person, role: Role): any[] {\n        // Is this person unavailable on this date?\n        if (person.is_unavailable_on(date)) {\n            return [true, \"unavailable\"];\n        }\n\n        // Is this person excluded for this date?\n        let exclusions_for_person = this.exclusion_zones.get(person);\n        if (!exclusions_for_person) {\n            return [false, \"no exclusions for \" + person.name];\n        }\n\n        // Does the exclusion zone for this person overlap with any existing?\n        let availability = person.prefs.availability;\n        let end_date = availability.get_end_date_from(date);\n        let new_exclusion = new Exclusion(date, end_date, role);\n\n        for (let exclusion of exclusions_for_person) {\n            if (exclusion.overlap_with(new_exclusion)) {\n                return [true, \"overlap with existing \" + JSON.stringify(exclusion)];\n            }\n        }\n        return [false, \"clear!\"];\n    }\n\n    private record_exclusions(date: Date, person: Person, primary_role: Role) {\n        let exclusions_for_person = this.exclusion_zones.get(person);\n        if (!exclusions_for_person) {\n            exclusions_for_person = [];\n        }\n\n        // make the exclusion\n        let availability = person.prefs.availability;\n        let end_date = availability.get_end_date_from(date);\n\n        for (let role of person.role_include_dependents_of(primary_role)) {\n            let exclusion = new Exclusion(date, end_date, role);\n            exclusions_for_person.push(exclusion);\n            console.log(\"Recorded exclusion for \" + person.name + \" from \" + date + \" for \" + exclusion.duration_in_days + \" days\");\n            this.exclusion_zones.set(person, exclusions_for_person);\n        }\n    }\n\n    jsonResult(minimized: boolean = false) {\n        // An array of dictionaries\n        // Each dict is ordered keys, being in order of the role\n\n        // These 'people' end up being our roles.\n        // Thing is, we want to know ALL people, in order...\n        // So I think - lets do this for ALL roles first\n        let ordered_roles = this.params.roles.roles_in_layout_order;\n\n        let rows = [];\n        for (let dateString of Array.from(this.dates.keys())) {\n            let schedule_for_day = this.dates.get(dateString);\n\n            // We create a dict, in order, for EVERY key of ordered_roles\n            let rowDict = {};\n\n            rowDict['date'] = schedule_for_day.date;\n            rowDict['date_key'] = dateString;\n\n            // Look at each known role. Fill in the people fulfilling that role\n            for (let role of ordered_roles) {\n                // Do we have a value, for this?\n                let peopleInRole = schedule_for_day.people_in_role(role);\n                rowDict[role.name] = peopleInRole;\n                // if (peopleInRole.length > 0) {\n                //     let names = peopleInRole.map(r => r.name);\n                //     rowDict[role.name] = names.join(\",\");\n                // } else {\n                //     if (!minimized) {\n                //         rowDict[role.name] = \"\";\n                //     }\n                // }\n            }\n\n            // Add the row\n            rows.push(rowDict);\n        }\n        return rows;\n    }\n\n    jsonFields() {\n        let ordered_roles = this.params.roles.roles_in_layout_order;\n        let field_names = ordered_roles.map(r => {\n            return r.name;\n        });\n        return [\n            \"date\",\n            ...field_names\n        ]\n    }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/scheduling/by_exclusion/scheduler.ts","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app.module';\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/main.ts","import {ErrorHandler, NgModule} from '@angular/core';\nimport {BrowserModule} from '@angular/platform-browser';\nimport {IonicApp, IonicErrorHandler, IonicModule} from 'ionic-angular';\nimport {MyApp} from './app.component';\n\nimport {AboutPage} from '../pages/about/about';\nimport {HomePage} from '../pages/home/home';\nimport {TabsPage} from '../pages/tabs/tabs';\nimport {PeoplePage} from \"../pages/people/people\";\n\nimport {StatusBar} from '@ionic-native/status-bar';\nimport {SplashScreen} from '@ionic-native/splash-screen';\nimport {MobxAngularModule} from 'mobx-angular';\nimport {ComponentsModule} from \"../components/components.module\";\nimport {NgPipesModule} from \"angular-pipes\";\nimport {RootStore} from \"../state/root\";\n\n@NgModule({\n    declarations: [\n        MyApp,\n        AboutPage,\n        PeoplePage,\n        HomePage,\n        TabsPage\n    ],\n    imports: [\n        BrowserModule,\n        NgPipesModule,\n        IonicModule.forRoot(MyApp),\n        ComponentsModule,\n        MobxAngularModule\n    ],\n    bootstrap: [IonicApp],\n    entryComponents: [\n        MyApp,\n        AboutPage,\n        PeoplePage,\n        HomePage,\n        TabsPage\n    ],\n    providers: [\n        StatusBar,\n        SplashScreen,\n        RootStore,\n        {provide: ErrorHandler, useClass: IonicErrorHandler},\n    ]\n})\nexport class AppModule {\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","import { Component } from '@angular/core';\nimport { Platform } from 'ionic-angular';\nimport { StatusBar } from '@ionic-native/status-bar';\nimport { SplashScreen } from '@ionic-native/splash-screen';\n\nimport { TabsPage } from '../pages/tabs/tabs';\n\n@Component({\n  templateUrl: 'app.html'\n})\nexport class MyApp {\n  rootPage:any = TabsPage;\n\n  constructor(platform: Platform, statusBar: StatusBar, splashScreen: SplashScreen) {\n    platform.ready().then(() => {\n      // Okay, so the platform is ready and our plugins are available.\n      // Here you can do any higher level native things you might need.\n      statusBar.styleDefault();\n      splashScreen.hide();\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts","import {action, observable} from \"mobx-angular\";\nimport ShortUniqueId from 'short-unique-id';\nimport {PeopleStore} from \"./people\";\nimport {OnThisDate, PickRule, Rule, Rules, UsageWeightedSequential} from \"../scheduling/rule_based/rules\";\n\nexport class Role {\n    @observable uuid: string;\n    @observable name: string;\n    @observable maximum_count: number;\n    @observable layout_priority: number;\n\n    constructor(name: string, uuid: string = null, priority = 0) {\n        if (uuid == null) {\n            let uuid_gen = new ShortUniqueId();\n            uuid = uuid_gen.randomUUID(8);\n        }\n        this.uuid = uuid;\n        this.name = name;\n        this.maximum_count = 1;\n        this.layout_priority = priority;\n    }\n\n    valueOf() {\n        return \"Role: \" + this.name;\n    }\n}\n\nlet leaderPriority = 11;\nlet soundPriority = 10; // 10\nlet instrumentPriority = 10;// 9\n\nlet defaultLeaderRole = new Role(\"Worship Leader\", null, leaderPriority);\n\nlet defaultSoundRole = new Role(\"Sound\", null, soundPriority);\nlet defaultComputerRole = new Role(\"Computer\", null, soundPriority);\n\nlet defaultBass = new Role(\"Bass\", null, instrumentPriority);\nlet defaultDrumsRole = new Role(\"Drums\", null, instrumentPriority);\nlet defaultKeysRole = new Role(\"Keys\", null, instrumentPriority);\nlet defaultAccousticGuitar = new Role(\"Guitar (Accoustic)\", null, instrumentPriority);\nlet defaultElectricGuitar = new Role(\"Guitar (Electric)\", null, instrumentPriority);\n\nlet defaultVocalsRole = new Role(\"Vocals\", null, instrumentPriority);\nlet defaultSaxRole = new Role(\"Sax\", null, instrumentPriority);\n\n\ndefaultLeaderRole.maximum_count = 1;\ndefaultSoundRole.maximum_count = 1;\ndefaultComputerRole.maximum_count = 1;\ndefaultKeysRole.maximum_count = 1;\n\ndefaultAccousticGuitar.maximum_count = 2;\n\ndefaultVocalsRole.maximum_count = 3;\n\ndefaultElectricGuitar.maximum_count = 1;\ndefaultBass.maximum_count = 1;\ndefaultDrumsRole.maximum_count = 1;\n\nexport class RolesStore {\n    @observable roles: Array<Role>;\n    rules: Array<Rule>;\n\n    constructor() {\n        this.rules = [];\n        this.roles = [\n            defaultLeaderRole,\n            defaultSoundRole,\n            defaultComputerRole,\n            defaultKeysRole,\n            defaultVocalsRole,\n            defaultDrumsRole,\n            defaultBass,\n            defaultAccousticGuitar,\n            defaultElectricGuitar,\n            defaultSaxRole\n        ];\n    }\n\n    @action\n    removeAllRoles() {\n        this.roles = [];\n    }\n\n    @action\n    addRole(r: Role) {\n        let foundIndex = this.roles.findIndex(role => {\n            return r.uuid == role.uuid;\n        });\n        // console.log(\"Index of \" + r.uuid + \" is \" + foundIndex);\n        if (foundIndex >= 0) {\n            return null;\n        }\n\n        this.roles.push(r);\n        // console.log(\"Added role: \" + JSON.stringify(r));\n        return r;\n    }\n\n    @action\n    addRoles(roles: Array<Role>) {\n        for (let role of roles) {\n            this.addRole(role);\n        }\n    }\n\n    @action\n    removeRole(r: Role) {\n        this.roles = this.roles.filter(role => role.uuid != r.uuid);\n    }\n\n    get roles_in_layout_order_grouped(): Array<Array<Role>> {\n        // Add all roles into a map\n        let roles_in_order = this.roles_in_layout_order;\n        let intermediate = new Map<number, Array<Role>>();\n        for (let role of roles_in_order) {\n            if (!intermediate.has(role.layout_priority)) {\n                intermediate.set(role.layout_priority, []);\n            }\n            intermediate.set(role.layout_priority, [...intermediate.get(role.layout_priority), role]);\n        }\n\n        // Turn into an array\n        let result = [];\n        intermediate.forEach((list, key: number) => {\n            result.push(list);\n        });\n        return result;\n    }\n\n    get roles_in_layout_order(): Array<Role> {\n        return this.roles.sort((a: Role, b: Role) => {\n            if (a.layout_priority < b.layout_priority) {\n                return 1;\n            } else if (a.layout_priority > b.layout_priority) {\n                return -1;\n            }\n            return 0;\n        });\n    }\n\n    find_role(role_name: string) {\n        for (let role of this.roles) {\n            if (role.name.toLowerCase() == role_name.toLowerCase()) {\n                return role;\n            }\n        }\n        return null;\n    }\n\n    pick_rules(people_store: PeopleStore): Map<Role, Rules> {\n        let rule_map = new Map<Role, Rules>();\n        for (let role of this.roles_in_layout_order) {\n            let rules = new Rules();\n\n            // Find any specific rules for this date.\n            rules.addRules(this.rules_for_role(role));\n\n            // Ordering people sequentially\n            let uws = new UsageWeightedSequential(people_store.people_with_role(role));\n            rules.addRule(uws);\n\n            rule_map.set(role, rules);\n        }\n        return rule_map;\n    }\n\n    addPickRule(rule: PickRule) {\n        /*\n        When putting rules together, user specified pick rules must come before the\n        UWS rules when executing. So we make sure they have a higher priority.\n        */\n        rule.priority = 10;\n        this.rules.push(rule);\n    }\n\n    private rules_for_role(role: Role) {\n        return this.rules.filter(r => {\n            if (r instanceof OnThisDate) {\n                return r.role.uuid == role.uuid;\n            }\n            return false;\n        });\n    }\n}\n\nexport {\n    defaultLeaderRole,\n    defaultSoundRole,\n    defaultDrumsRole,\n    defaultVocalsRole,\n    defaultComputerRole,\n    defaultKeysRole,\n    defaultAccousticGuitar,\n    defaultElectricGuitar,\n    defaultBass,\n    defaultSaxRole\n}\n\n\n// WEBPACK FOOTER //\n// ./src/state/roles.ts","import {observable} from \"mobx-angular\";\nimport {Person} from \"./people\";\n\nclass UIStore {\n    @observable selected_person: Person;\n\n    constructor() {\n    }\n\n    get have_selection(): boolean {\n        return this.selected_person != null;\n    }\n\n}\n\nexport {\n    UIStore\n}\n\n\n// WEBPACK FOOTER //\n// ./src/state/UIState.ts","import {\n    defaultAccousticGuitar,\n    defaultBass,\n    defaultComputerRole,\n    defaultDrumsRole,\n    defaultElectricGuitar,\n    defaultKeysRole,\n    defaultLeaderRole,\n    defaultSaxRole,\n    defaultSoundRole,\n    defaultVocalsRole\n} from \"../../state/roles\";\n\nimport {PeopleStore, Person} from \"../../state/people\";\nimport {AvailabilityUnit} from \"../../state/scheduling-types\";\nimport {RootStore} from \"../../state/root\";\n\nlet neil: Person = new Person(\"Neil Clayton\");\nlet cherilyn: Person = new Person(\"Cherilyn Clayton\");\nlet christine: Person = new Person(\"Christine Edlin\");\nlet stuart: Person = new Person(\"Stuart Cambell\");\nlet jeremy_selfe: Person = new Person(\"Jeremy Selfe\");\n\nlet daniel: Person = new Person(\"Daniel Gibbs\");\nlet ben: Person = new Person(\"Ben Watson\");\nlet courtney: Person = new Person(\"Courtney Anderson\");\nlet robs: Person = new Person(\"Rob Swiney\");\nlet robp: Person = new Person(\"Rob Penhey\");\nlet dave: Person = new Person(\"Dave Humphries\");\nlet ralph: Person = new Person(\"Ralph Lambert\");\nlet anita: Person = new Person(\"Anita Lambert\");\nlet annie: Person = new Person(\"Annie McMullen\");\nlet jo: Person = new Person(\"Jo\");\nlet allie: Person = new Person(\"Allie Pope\");\nlet craig: Person = new Person(\"Craig Campbell\");\n\nlet chris: Person = new Person(\"Chris Evans\");\nlet jeremy_l: Person = new Person(\"Jeremy Legg\");\nlet andre_l: Person = new Person(\"Andre Legg\");\nlet jeremy_w: Person = new Person(\"Jeremy Watson\");\nlet john: Person = new Person(\"John Sutherland\");\n\nchristine.addUnavailableRange(new Date(2018, 3, 0), new Date(2050, 1, 1));\ncraig.addUnavailable(new Date(2018, 0, 0));\n\nexport class TestStoreConstruction {\n    constructor() {\n\n    }\n\n    static SetupStore(root_store: RootStore) {\n        let person_store: PeopleStore = root_store.people_store;\n\n        person_store.addPerson(neil)\n            .addRole(defaultSoundRole, 1)\n            .addRole(defaultSaxRole, 3)\n            .avail_every(4, AvailabilityUnit.EVERY_N_WEEKS);\n\n        person_store.addPerson(cherilyn)\n            .addRole(defaultKeysRole)\n            .with_dep_role(defaultLeaderRole, [defaultKeysRole])\n            .avail_every(2, AvailabilityUnit.EVERY_N_WEEKS);\n\n        person_store.addPerson(christine)\n            .with_dep_role(defaultLeaderRole, [defaultVocalsRole])\n            .avail_every(4, AvailabilityUnit.EVERY_N_WEEKS);\n\n        person_store.addPerson(stuart)\n            .addRole(defaultVocalsRole)\n            .with_dep_role(defaultLeaderRole, [defaultAccousticGuitar, defaultVocalsRole])\n            .avail_every(4, AvailabilityUnit.EVERY_N_WEEKS);\n\n        person_store.addPerson(jeremy_selfe)\n            .addRole(defaultLeaderRole, 2)\n            .addRole(defaultElectricGuitar)\n            .with_dep_role(defaultLeaderRole, [defaultElectricGuitar])\n            .avail_every(4, AvailabilityUnit.EVERY_N_WEEKS);\n\n        person_store.addPerson(ralph)\n            .with_dep_role(defaultLeaderRole, [defaultAccousticGuitar, defaultVocalsRole])\n            .avail_every(3, AvailabilityUnit.EVERY_N_WEEKS);\n\n\n        person_store.addPerson(daniel)\n            .addRole(defaultDrumsRole, 3)\n            .addRole(defaultBass);\n\n        person_store.addPerson(craig)\n            .addRole(defaultDrumsRole)\n            .avail_every(5, AvailabilityUnit.EVERY_N_WEEKS);\n\n        person_store.addPerson(ben)\n            .addRole(defaultDrumsRole, 1)\n            .addRole(defaultBass, 3)\n            .avail_every(2, AvailabilityUnit.EVERY_N_WEEKS);\n\n        person_store.addPerson(courtney)\n            .addRole(defaultVocalsRole)\n            .avail_every(2, AvailabilityUnit.EVERY_N_WEEKS);\n\n        person_store.addPerson(robp)\n            .addRole(defaultBass, 3)\n            .addRole(defaultSoundRole)\n            .avail_every(3, AvailabilityUnit.EVERY_N_WEEKS);\n\n        person_store.addPerson(robs)\n            .addRole(defaultBass)\n            .avail_every(2, AvailabilityUnit.EVERY_N_WEEKS);\n\n        person_store.addPerson(dave)\n            .addRole(defaultAccousticGuitar)\n            .addRole(defaultVocalsRole)\n            .with_dep_role(defaultAccousticGuitar, [defaultVocalsRole])\n            .avail_every(2, AvailabilityUnit.EVERY_N_WEEKS);\n\n        person_store.addPerson(anita)\n            .addRole(defaultVocalsRole)\n            .avail_every(3, AvailabilityUnit.EVERY_N_WEEKS);\n\n        person_store.addPerson(annie)\n            .addRole(defaultVocalsRole)\n            .avail_every(3, AvailabilityUnit.EVERY_N_WEEKS);\n\n        person_store.addPerson(jo)\n            .addRole(defaultVocalsRole)\n            .avail_every(3, AvailabilityUnit.EVERY_N_WEEKS);\n\n        person_store.addPerson(allie)\n            .addRole(defaultVocalsRole)\n            .avail_every(3, AvailabilityUnit.EVERY_N_WEEKS);\n\n        person_store.addPerson(chris)\n            .addRole(defaultSoundRole)\n            // .addRole(defaultElectricGuitar)\n            .avail_every(3, AvailabilityUnit.EVERY_N_WEEKS);\n\n        person_store.addPerson(jeremy_l)\n            .addRole(defaultSoundRole)\n            .addRole(defaultComputerRole)\n            .avail_every(2, AvailabilityUnit.EVERY_N_WEEKS);\n\n        person_store.addPerson(andre_l)\n            .addRole(defaultSoundRole)\n            .addRole(defaultElectricGuitar)\n            .avail_every(2, AvailabilityUnit.EVERY_N_WEEKS);\n\n        person_store.addPerson(jeremy_w)\n            .addRole(defaultSoundRole)\n            .addRole(defaultComputerRole)\n            .avail_every(2, AvailabilityUnit.EVERY_N_WEEKS);\n\n        person_store.addPerson(john)\n            .addRole(defaultSoundRole)\n            .addRole(defaultComputerRole, 2)\n            .avail_every(1, AvailabilityUnit.EVERY_N_WEEKS);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/store/test.store.ts","import {Exclusion, ScheduleAtDate, ScheduleInput} from \"../common\";\nimport {Role} from \"../../state/roles\";\nimport {Rules, RuleState} from \"./rules\";\nimport {Person, Unavailablity} from \"../../state/people\";\nimport * as _ from 'lodash';\n\nclass ScheduleWithRules {\n    dates: Map<string, ScheduleAtDate>;\n    params: ScheduleInput;\n    facts: RuleState;\n    exclusion_zones: Map<Person, Array<Exclusion>>;\n\n    constructor(input: ScheduleInput) {\n        this.params = input;\n        this.params.validate();\n    }\n\n    create_schedule() {\n        this.clear_working_state();\n\n        console.log(\"Working from \" + this.params.start_date + \" to: \" + this.params.end_date);\n        let schedule_duration = this.params.schedule_duration_in_days;\n        console.log(\"Schedule is \" + schedule_duration + \" days long\");\n\n\n        let role_store = this.params.roles;\n        let role_groups = role_store.roles_in_layout_order_grouped;\n        let role_names = role_groups.map(g => JSON.stringify(g.map(r => r.name)));\n        console.log(\"Roles (in order of importance): \" + JSON.stringify(role_names));\n\n        role_groups.forEach(rg => this.process_role_group(rg));\n    }\n\n    process_role_group(role_group: Array<Role>) {\n        let role_store = this.params.roles;\n        let people_store = this.params.people;\n\n        let current_date = this.params.start_date;\n        console.log(\"\\r\\nNext group: \" + JSON.stringify(role_group.map(r => r.name)));\n\n        // Iterate through all dates\n        let iterations = 0;\n\n        // This is all PickRules, for all roles\n        let all_pick_rules = role_store.pick_rules(people_store);\n\n        while (current_date.valueOf() < this.params.end_date.valueOf()) {\n            console.log(\"Next date: \" + current_date);\n            this.facts.date = current_date;\n\n            for (let role of role_group) {\n                this.process_role(current_date, role, all_pick_rules);\n            }\n\n            // Move to the next date\n            current_date = this.choose_next_schedule_date(current_date);\n\n            // This is taking 10,000 reasons too far!\n            iterations++;\n            if (iterations > 10000) {\n                console.error(\"Max iterations - bug!?\");\n                break\n            }\n\n        }\n    }\n\n    process_role(current_date: Date, role: Role, all_pick_rules: Map<Role, Rules>) {\n        let specific_day = this.get_schedule_for_date(current_date);\n        let peopleInRole = specific_day.people_in_role(role);\n        if (peopleInRole.length >= role.maximum_count) {\n            console.log(\"Not processing \" + role.name + \", already have \" + role.maximum_count + \" slotted in\");\n            return;\n        }\n\n        // If already at max for this role, ignore it.\n\n        // For this date, try to layout all people\n        let people_for_this_role = this.params.people.people_with_role(role);\n\n        // Setup our available people (which at the beginning, is 'everyone')\n        if (people_for_this_role.length == 0) {\n            // console.log(\"Laying out role: \" + role.name + \" ... skipping (no one to do it)\");\n            return;\n        }\n\n        for (let person of people_for_this_role) {\n            this.facts.person = person;\n            console.log(\"Can \" + person.name + \" do role \" + role.name + \"?\");\n            let pick_rules_for_role = all_pick_rules.get(role);\n            if (pick_rules_for_role == null) {\n                throw Error(\"No pick rules setup for role: \" + role.name)\n            }\n\n            let next_suitable_person_iterator = pick_rules_for_role.execute(this.facts);\n            let next_suitable_person = next_suitable_person_iterator.next().value;\n            if (next_suitable_person == null) {\n                console.log(\"No people suitable for role \" + role.name);\n                continue;\n            }\n\n            console.log(\"Next suitable is \" + next_suitable_person.name);\n            if (_.includes(specific_day.people_in_role(role), person) ||\n                _.includes(specific_day.people_in_role(role), next_suitable_person)) {\n                console.log(\"Skipping \" + person.name + \", they are already on it\");\n                continue;\n            }\n\n            // Is the person available according to their availability preference?\n            let [has_exclusion, reason] = this.has_exclusion_for(current_date, person, role);\n            if (has_exclusion) {\n                console.log(person.name + \" cant do it, they have an exclusion: \" + reason);\n                continue;\n            }\n\n            let persons_role_rules = next_suitable_person.role_rules();\n            let next_wanted_role = persons_role_rules.execute(this.facts).next().value;\n            if (next_wanted_role.uuid != role.uuid) {\n                console.log(\"Putting \" + next_suitable_person.name + \" into \" + next_wanted_role + \" instead of \" + role + \" due to a role weighting\");\n                this.place_person_in_role(next_suitable_person, next_wanted_role, current_date);\n                // now continue with the loop, because we still havn't found someone for the role we were originally looking for.\n                let pick_rule = all_pick_rules.get(next_wanted_role);\n                pick_rule.use_this_person(next_suitable_person);\n                persons_role_rules.use_this_role(next_wanted_role);\n                continue;\n            }\n\n            // OK. So. Turns out the role is the same.\n            // Place the person, and we're done filling this role.\n            this.place_person_in_role(next_suitable_person, role, current_date);\n            pick_rules_for_role.use_this_person(next_suitable_person);\n            persons_role_rules.use_this_role(next_wanted_role);\n\n            let peopleInRole = specific_day.people_in_role(role);\n            if (peopleInRole.length >= role.maximum_count) {\n                console.log(\"Done with \" + role.name + \", have \" + role.maximum_count + \" slotted in\");\n                return;\n            }\n        }\n    }\n\n    has_exclusion_for(date: Date, person: Person, role: Role): any[] {\n        // Is this person unavailable on this date?\n        if (person.is_unavailable_on(date)) {\n            return [true, \"unavailable\"];\n        }\n\n        // Is this person excluded for this date?\n        let exclusions_for_person = this.exclusion_zones.get(person);\n        if (!exclusions_for_person) {\n            return [false, \"no exclusions for \" + person.name];\n        }\n\n        // Does the exclusion zone for this person overlap with any existing?\n        let availability = person.prefs.availability;\n        let end_date = availability.get_end_date_from(date);\n        let new_exclusion = new Exclusion(date, end_date, role);\n\n        for (let exclusion of exclusions_for_person) {\n            if (exclusion.overlap_with(new_exclusion)) {\n                return [true, \"overlap with existing \" + exclusion];\n            }\n        }\n        return [false, \"clear!\"];\n    }\n\n    get_schedule_for_date(date: Date) {\n        let dateAtHour = Unavailablity.dayAndHourForDate(date);\n        let schedule = this.dates.get(dateAtHour);\n        if (schedule == null) {\n            console.log(\"Create new schedule for \" + dateAtHour);\n            schedule = new ScheduleAtDate(date);\n            this.dates.set(dateAtHour, schedule);\n            return schedule;\n        } else {\n            // console.log(\"Reuse schedule for \" + dateAtHour + \" = \" + date);\n            return schedule;\n        }\n    }\n\n    private place_person_in_role(person: Person, role: Role, date: Date) {\n        let specific_day = this.get_schedule_for_date(date);\n        console.log(\"Putting \" + person.name + \" into \" + role + \" on \" + date.toDateString());\n        specific_day.add_person(person, role);\n\n        let exclusions_for_person = this.exclusion_zones.get(person);\n        if (!exclusions_for_person) {\n            exclusions_for_person = [];\n        }\n\n        // make the exclusion\n        let availability = person.prefs.availability;\n        let end_date = availability.get_end_date_from(date);\n\n        for (let r of person.role_include_dependents_of(role)) {\n            let exclusion = new Exclusion(date, end_date, r);\n            exclusions_for_person.push(exclusion);\n            console.log(\"Recorded exclusion for \" + person.name + \" from \" + date + \" for \" + exclusion.duration_in_days + \" days\");\n            this.exclusion_zones.set(person, exclusions_for_person);\n        }\n    }\n\n    private choose_next_schedule_date(date: Date): Date {\n        let next_date = new Date(date);\n        // console.log(\"Moving from date ... : \" + next_date);\n        next_date.setDate(date.getDate() + this.params.days_per_period);\n        // console.log(\".... to date ... : \" + next_date);\n        return next_date;\n    }\n\n    private clear_working_state() {\n        this.exclusion_zones = new Map<Person, Array<Exclusion>>();\n        this.dates = new Map<string, ScheduleAtDate>();\n        this.facts = new RuleState();\n    }\n\n    jsonResult(minimized: boolean = false) {\n        // An array of dictionaries\n        // Each dict is ordered keys, being in order of the role\n\n        // These 'people' end up being our roles.\n        // Thing is, we want to know ALL people, in order...\n        // So I think - lets do this for ALL roles first\n        let ordered_roles = this.params.roles.roles_in_layout_order;\n\n        let rows = [];\n        for (let dateString of Array.from(this.dates.keys())) {\n            let schedule_for_day = this.dates.get(dateString);\n\n            // We create a dict, in order, for EVERY key of ordered_roles\n            let rowDict = {};\n\n            rowDict['date'] = schedule_for_day.date;\n            rowDict['date_key'] = dateString;\n\n            // Look at each known role. Fill in the people fulfilling that role\n            for (let role of ordered_roles) {\n                // Do we have a value, for this?\n                let peopleInRole = schedule_for_day.people_in_role(role);\n                rowDict[role.name] = peopleInRole;\n                if (peopleInRole.length > 0) {\n                    let names = peopleInRole.map(r => r.name);\n                    rowDict[role.name] = names.join(\",\");\n                } else {\n                    if (!minimized) {\n                        rowDict[role.name] = \"\";\n                    }\n                }\n            }\n\n            // Add the row\n            rows.push(rowDict);\n        }\n        return rows;\n    }\n\n    jsonFields() {\n        let ordered_roles = this.params.roles.roles_in_layout_order;\n        let field_names = ordered_roles.map(r => {\n            return r.name;\n        });\n        return [\n            \"date\",\n            ...field_names\n        ]\n    }\n}\n\nexport {\n    ScheduleWithRules\n}\n\n\n// WEBPACK FOOTER //\n// ./src/scheduling/rule_based/scheduler.ts","import {NgModule} from '@angular/core';\nimport {ScheduleViewerComponent} from './schedule-viewer/schedule-viewer';\nimport {IonicModule} from \"ionic-angular\";\nimport {NgPipesModule} from \"angular-pipes\";\nimport {PersonEditorComponent} from './person-editor/person-editor';\n\n@NgModule({\n    declarations: [\n        ScheduleViewerComponent,\n        PersonEditorComponent\n    ],\n    imports: [\n        IonicModule,\n        NgPipesModule\n    ],\n    exports: [\n        ScheduleViewerComponent,\n        PersonEditorComponent\n    ]\n})\nexport class ComponentsModule {\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/components.module.ts","import {ChangeDetectionStrategy, Component, Input} from '@angular/core';\nimport {ScheduleByExclusion} from \"../../scheduling/by_exclusion/scheduler\";\nimport {isArray} from \"util\";\nimport {Person} from \"../../state/people\";\nimport {RootStore} from \"../../state/root\";\n\n@Component({\n    // changeDetection: ChangeDetectionStrategy.OnPush,\n    selector: 'schedule-viewer',\n    templateUrl: 'schedule-viewer.html'\n})\nexport class ScheduleViewerComponent {\n    @Input() schedule: ScheduleByExclusion;\n\n    constructor(private store: RootStore) {\n    }\n\n    get headers(): Array<string> {\n        if (!this.schedule) {\n            return [];\n        }\n        return this.schedule.jsonFields();\n    }\n\n    get rows(): Array<Object> {\n        if (!this.schedule) {\n            return [];\n        }\n        // console.log(JSON.stringify(this.schedule.jsonResult()));\n        return this.schedule.jsonResult();\n    }\n\n    keys_for_row(row) {\n        let keys = Object.keys(row).filter(v => !v.startsWith('date'));\n        return Array.from(keys);\n    }\n\n    value_as_array(value): any[] {\n        if (isArray(value)) {\n            return value;\n        }\n        return [value];\n    }\n\n    /*\n    Want to paint a rectangle, from the person@slot, to the end of their exclusion zone\n    Every time we place someone, we do create an exclusion that says \"jeremy, excluded 2 wks, due to guitar'\n\n    We can use this.\n    This method is called every cell. We're asking if this cell:\n    a) sits in an exclusion zone, for the selected person\n    b) where that exclusion zone includes the date of the row\n     */\n    in_exclusion_zone(row, role_name): boolean {\n        let person = this.selected_person;\n        if (!person) {\n            return false;\n        }\n        let role = this.store.roles_store.find_role(role_name);\n        if (!role) {\n            return false;\n        }\n\n        let date_for_row = row['date'];\n        let exclusion_zones = this.schedule.exclusion_zones.get(person);\n\n        // lets find those zones relating directly to this role\n        let zones_matching_role = exclusion_zones.filter(z => z.role.uuid == role.uuid);\n        if (!zones_matching_role.length) {\n            return false;\n        }\n\n        let containining_this_date = zones_matching_role.filter(z => z.includes_date(date_for_row));\n        return containining_this_date.length > 0;\n    }\n\n    /*\n    Want to mark if:\n    a) The person within this cell == the selected person\n     */\n    selected_and_in_role(a_person: Person, role_name) {\n        let person = this.selected_person;\n        if (!person) {\n            return false;\n        }\n        if (a_person.uuid != person.uuid) {\n            return false;\n        }\n        let role = this.store.roles_store.find_role(role_name);\n        if (!role) {\n            return false;\n        }\n        return true;\n    }\n\n    select(person) {\n        this.store.ui_store.selected_person = person;\n    }\n\n    get selected_person(): Person {\n        if (!this.store.ui_store || this.store.ui_store.selected_person == null) {\n            return null;\n        }\n        return this.store.ui_store.selected_person;\n    }\n\n    get hover(): string {\n        if (!this.selected_person) {\n            return \"Nothing\";\n        }\n        return this.selected_person.name;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/schedule-viewer/schedule-viewer.ts","import {ChangeDetectionStrategy, Component, Input} from '@angular/core';\nimport {Person} from \"../../state/people\";\nimport {ScheduleByExclusion} from \"../../scheduling/by_exclusion/scheduler\";\nimport includes from 'lodash/includes';\n\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    selector: 'person-editor',\n    templateUrl: 'person-editor.html'\n})\nexport class PersonEditorComponent {\n    @Input() person: Person;\n    @Input() schedule: ScheduleByExclusion;\n\n    constructor() {\n    }\n\n    scheduled_dates() {\n        // Find a list of schedules for this person\n        let schedules = Array.from(this.schedule.dates.values()).filter(v => {\n            return includes(v.people, this.person);\n        });\n\n        return schedules;\n        // return schedules.map(s => s.date);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/person-editor/person-editor.ts"],"sourceRoot":""}